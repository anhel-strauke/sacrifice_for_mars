{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/carry_item.js","webpack:///./js/character.js","webpack:///./js/consts.js","webpack:///./js/game_config.js","webpack:///./js/item_factory.js","webpack:///./js/items.js","webpack:///./js/level_state.js","webpack:///./js/main.js","webpack:///./js/player.js"],"names":["CarryItem","Character","constructor","state","enabled","flying","canBeCarried","player","effectivePlayerY","posY","effectivePlayerPoint","Kiwi","Geom","Point","posX","sprite","physics","box","worldHitbox","containsPoint","update","isTouching","Consts","velocityX","velocityY","CharacterSprite","texture","hitbox","anchorx","anchory","GameObjects","Sprite","call","components","add","Components","ArcadePhysics","acceleration","y","Conf","transform","anchorPointX","x","width","anchorPointY","height","prototype","extend","dir","DEFAULT_DIR","SPRITE_SIZE","HITBOX","Rectangle","SPRITE_FILE","NAME","plannedPos","preload","addSpriteSheet","create","textures","_createAnimations","addChild","planPosition","bbox","playAnimation","name","animation","play","playAnimationIfNotPlaying","currentAnimation","velocity","vx","vy","accelerationX","ax","accelerationY","ay","direction","scaleX","destroy","removeChild","drawBBoxOn","drawContext","draw","_addAnimation","frames","delay","loop","realFrames","hasOwnProperty","i","from","to","push","LEFT","RIGHT","UP","DOWN","TILE_SIZE","DEBUG","GRAVITY","ItemsFactory","classes","register","itemClass","createItemFromObject","objdata","type","obj","TvItem","CrioItem","ColonistItem","BioreactorItem","items","length","itm","itmPoint","splice","readObjectsFromJSONFile","fileid","datajson","data","JSON","parse","result","layers","layer","j","objects","LevelState","levelId","dbg","State","Player","factory","jsonfile","addJSON","tilemap","Tilemap","TileMap","tiles","physLayer","console","log","tileTypes","allowCollisions","ANY","swapChildren","game","stage","createDebugCanvas","overlapsTiles","input","keyboard","isDown","Input","Keycodes","go","stop","jump","justPressed","A","item","takeItem","e","S","throwItem","clearDebugCanvas","dctx","Game","scaleType","Stage","SCALE_NONE","isPlaying","vel"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/main.js\");\n","\"use strict\"\r\n\r\nimport * as Consts from \"./consts\"\r\nimport {Character} from \"./character\"\r\n\r\nclass CarryItem extends Character\r\n{\r\n    constructor(state) {\r\n        super(state)\r\n        this.enabled = true\r\n        this.flying = false\r\n    }\r\n\r\n    canBeCarried(player) {\r\n        if (this.enabled) {\r\n            let effectivePlayerY = player.posY - 5\r\n            let effectivePlayerPoint = new Kiwi.Geom.Point(player.posX, effectivePlayerY)\r\n            if (this.sprite.physics.box.worldHitbox.containsPoint(effectivePlayerPoint)) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    update() {\r\n        super.update()\r\n        if (this.isTouching(Consts.DOWN)) {\r\n            this.velocityX = 0\r\n            this.velocityY = 0\r\n        }\r\n        if (this.velocityY == 0) {\r\n            this.flying = false\r\n        }\r\n    }\r\n}\r\n\r\nexport {CarryItem}","\"use strict\"\r\n\r\nimport * as Consts from \"./consts\"\r\nimport * as Conf from \"./game_config\"\r\n\r\nfunction CharacterSprite(state, texture, hitbox, anchorx=null, anchory=null) {\r\n    Kiwi.GameObjects.Sprite.call(this, state, texture, 0, 0)\r\n    this.physics = this.components.add(new Kiwi.Components.ArcadePhysics(this, this.box))\r\n    this.physics.box.hitbox = hitbox\r\n    this.physics.acceleration.y = Conf.GRAVITY\r\n    if (anchorx === null) {\r\n        this.transform.anchorPointX = hitbox.x + hitbox.width / 2\r\n    } else {\r\n        this.transform.anchorPointX = anchorx\r\n    }\r\n    if (anchory === null) {\r\n        this.transform.anchorPointY = hitbox.y + hitbox.height / 2\r\n    } else {\r\n        this.transform.anchorPointY = anchory\r\n    }\r\n}\r\n\r\nCharacterSprite.prototype.update = function() {\r\n    Kiwi.GameObjects.Sprite.prototype.update.call(this)\r\n    this.physics.update()\r\n}\r\n\r\nKiwi.extend(CharacterSprite, Kiwi.GameObjects.Sprite)\r\n\r\n\r\nclass Character\r\n{\r\n    constructor(state) {\r\n        this.state = state\r\n        this.dir = Consts.RIGHT\r\n        this.DEFAULT_DIR = Consts.RIGHT\r\n        this.SPRITE_SIZE = 128\r\n        this.HITBOX = new Kiwi.Geom.Rectangle(0, 0, 128, 128)\r\n        this.SPRITE_FILE = \"\"\r\n        this.NAME = \"\"\r\n        this.plannedPos = null\r\n    }\r\n\r\n    preload() {\r\n        this.state.addSpriteSheet(this.NAME + \"Sprite\", this.SPRITE_FILE, \r\n                                  this.SPRITE_SIZE, this.SPRITE_SIZE)\r\n    }\r\n\r\n    create() {\r\n        this.sprite = new CharacterSprite(this.state, this.state.textures[this.NAME + \"Sprite\"], this.HITBOX)\r\n        this._createAnimations()\r\n        this.state.addChild(this.sprite)\r\n    }\r\n\r\n    update() {\r\n        if (this.plannedPos) {\r\n            this.posX = this.plannedPos.x\r\n            this.posY = this.plannedPos.y\r\n            this.plannedPos = null\r\n        }\r\n    }\r\n\r\n    planPosition(x, y) {\r\n        this.plannedPos = {x: x, y: y}\r\n    }\r\n\r\n    get posX() {\r\n        return this.sprite.x + this.sprite.transform.anchorPointX\r\n    }\r\n\r\n    set posX(x) {\r\n        this.sprite.x = x - this.sprite.transform.anchorPointX\r\n    }\r\n\r\n    get posY() {\r\n        return this.sprite.y + this.SPRITE_SIZE\r\n    }\r\n\r\n    set posY(y) {\r\n        this.sprite.y = y - this.SPRITE_SIZE\r\n    }\r\n\r\n    get bbox() {\r\n        return this.sprite.physics.box\r\n    }\r\n\r\n    playAnimation(name) {\r\n        this.sprite.animation.play(name)\r\n    }\r\n\r\n    playAnimationIfNotPlaying(name) {\r\n        if (this.currentAnimation.name != name) {\r\n            this.playAnimation(name)\r\n        }\r\n    }\r\n\r\n    get currentAnimation() {\r\n        return this.sprite.animation.currentAnimation\r\n    }\r\n\r\n    get velocityX() {\r\n        return this.sprite.physics.velocity.x\r\n    }\r\n\r\n    set velocityX(vx) {\r\n        this.sprite.physics.velocity.x = vx\r\n    }\r\n\r\n    get velocityY() {\r\n        return this.sprite.physics.velocity.y\r\n    }\r\n\r\n    set velocityY(vy) {\r\n        this.sprite.physics.velocity.y = vy\r\n    }\r\n\r\n    get accelerationX() {\r\n        return this.sprite.physics.acceleration.x\r\n    }\r\n\r\n    set accelerationX(ax) {\r\n        this.sprite.physics.acceleration.x = ax\r\n    }\r\n\r\n    get accelerationY() {\r\n        return this.sprite.physics.acceleration.y\r\n    }\r\n\r\n    set accelerationY(ay) {\r\n        this.sprite.physics.acceleration.y = ay\r\n    }\r\n\r\n    get direction() {\r\n        return this.dir\r\n    }\r\n\r\n    set direction(dir) {\r\n        this.dir = dir\r\n        if (dir == this.DEFAULT_DIR) {\r\n            this.sprite.scaleX = 1\r\n        } else {\r\n            this.sprite.scaleX = -1\r\n        }\r\n    }\r\n\r\n    isTouching(dir) {\r\n        return this.sprite.physics.isTouching(dir)\r\n    }\r\n\r\n    destroy() {\r\n        this.state.removeChild(this.sprite)\r\n    }\r\n\r\n    // Debug\r\n    drawBBoxOn(drawContext) {\r\n        this.sprite.box.draw(drawContext)\r\n    }\r\n\r\n    // Internal\r\n    _addAnimation(name, frames, delay, loop) {\r\n        let realFrames = frames\r\n        if (frames.hasOwnProperty(\"from\") && frames.hasOwnProperty(\"to\")) {\r\n            realFrames = []\r\n            for (let i = frames.from; i <= frames.to; ++i) {\r\n                realFrames.push(i)\r\n            }\r\n        }\r\n        this.sprite.animation.add(name, realFrames, delay, loop)\r\n    }\r\n\r\n    // OVERRIDE\r\n    _createAnimations() {\r\n\r\n    }\r\n}\r\n\r\nexport {Character}","\"use strict\"\r\n\r\nconst LEFT  = Kiwi.Components.ArcadePhysics.LEFT\r\nconst RIGHT = Kiwi.Components.ArcadePhysics.RIGHT\r\nconst UP    = Kiwi.Components.ArcadePhysics.UP\r\nconst DOWN  = Kiwi.Components.ArcadePhysics.DOWN\r\n\r\nexport {\r\n    LEFT,\r\n    RIGHT,\r\n    UP,\r\n    DOWN\r\n}","\"use strict\"\r\n\r\nconst TILE_SIZE = 48\r\nconst DEBUG = false\r\nconst GRAVITY = 7\r\n\r\nexport {TILE_SIZE, GRAVITY, DEBUG}","\"use strict\"\r\n\r\nclass ItemsFactory\r\n{\r\n    constructor(state) {\r\n        this.state = state\r\n        this.classes = {}\r\n    }\r\n\r\n    register(name, itemClass) {\r\n        this.classes[name] = itemClass\r\n    }\r\n\r\n    createItemFromObject(objdata) {\r\n        if (this.classes.hasOwnProperty(objdata.type)) {\r\n            let obj = new this.classes[objdata.type](this.state)\r\n            obj.planPosition(objdata.x, objdata.y)\r\n            return obj\r\n        }\r\n        return null\r\n    }\r\n}\r\n\r\nexport {ItemsFactory}","\"use strict\"\r\n\r\nimport {CarryItem} from \"./carry_item\"\r\nimport {Character} from \"./character\"\r\n\r\nclass TvItem extends CarryItem {\r\n    constructor(state) {\r\n        super(state)\r\n        this.HITBOX = new Kiwi.Geom.Rectangle(0, 10, 62, 54)\r\n        this.SPRITE_FILE = \"assets/tv.png\"\r\n        this.NAME = \"tv\"\r\n        this.SPRITE_SIZE = 64\r\n    }\r\n\r\n    _createAnimations() {\r\n        this._addAnimation(\"idle\", [0], 0.1, false)\r\n        this.playAnimation(\"idle\")\r\n    }\r\n\r\n    preload() {\r\n    }\r\n}\r\n\r\n\r\nclass CrioItem extends Character\r\n{\r\n    constructor(state) {\r\n        super(state)\r\n        this.SPRITE_SIZE = 128\r\n        this.HITBOX = new Kiwi.Geom.Rectangle(25, 26, 85, 102)\r\n        this.SPRITE_FILE = \"assets/crio.png\"\r\n        this.NAME = \"crio\"\r\n    }\r\n\r\n    preload() {\r\n    }\r\n\r\n    _createAnimations() {\r\n        this._addAnimation(\"full\", [0], 0.1, false)\r\n        this._addAnimation(\"empty\", [1], 0.1, false)\r\n        this.playAnimation(\"full\")\r\n    }\r\n}\r\n\r\n\r\nclass ColonistItem extends Character \r\n{\r\n    constructor(state) {\r\n        super(state)\r\n        this.SPRITE_SIZE = 64\r\n        this.HITBOX = new Kiwi.Geom.Rectangle(4, 24, 56, 40)\r\n        this.NAME = \"colonist\"\r\n        this.SPRITE_FILE = \"\"\r\n    }\r\n\r\n    preload() {\r\n    }\r\n\r\n    _createAnimations() {\r\n        this._addAnimation(\"idle\", [0], 0.1, false)\r\n        this.playAnimation(\"idle\")    \r\n    }\r\n}\r\n\r\n\r\nclass BioreactorItem extends Character \r\n{\r\n    constructor(state) {\r\n        super(state)\r\n        this.NAME = \"br\"\r\n        this.SPRITE_SIZE = 64\r\n        this.HITBOX = new Kiwi.Geom.Rectangle(0, 14, 64, 50)\r\n    }\r\n\r\n    _createAnimations() {\r\n        this._addAnimation(\"idle\", [0], 0.1, false)\r\n        this.playAnimation(\"idle\")\r\n    }\r\n\r\n    create() {\r\n        super.create()\r\n    }\r\n\r\n    update() {\r\n        super.update()\r\n        let hitbox = this.sprite.physics.box.worldHitbox\r\n        for (let i = 0; i < this.state.items.length; ++i) {\r\n            let itm = this.state.items[i]\r\n            if (itm.NAME == \"colonist\" && itm.flying) {\r\n                let itmPoint = new Kiwi.Geom.Point(itm.posX, itm.posY)\r\n                if (hitbox.containsPoint(itmPoint)) {\r\n                    itm.destroy()\r\n                    this.state.items.splice(i, 1)\r\n                    break\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    preload() {\r\n    }\r\n}\r\n\r\nexport {TvItem, BioreactorItem, CrioItem}","\"use strict\"\r\n\r\nimport {TILE_SIZE, DEBUG} from \"./game_config\"\r\nimport {Player} from \"./player\"\r\nimport * as Consts from \"./consts\"\r\nimport {ItemsFactory} from \"./item_factory\"\r\nimport {TvItem, BioreactorItem} from \"./items\"\r\n\r\nfunction readObjectsFromJSONFile(state, fileid) {\r\n    const datajson = state.data[fileid].data\r\n    const data = JSON.parse(datajson)\r\n    // Look for objects layers\r\n    let result = []\r\n    for (let i = 0; i < data.layers.length; ++i) {\r\n        const layer = data.layers[i]\r\n        if (layer.hasOwnProperty(\"objects\")) {\r\n            for (let j = 0; j < layer.objects.length; ++j) {\r\n                result.push(layer.objects[j])\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nconst LevelState = function(levelId) {\r\n    let dbg = false\r\n    let state = new Kiwi.State(\"level_\" + levelId)\r\n    let player = new Player(state)\r\n\r\n    let factory = new ItemsFactory(state)\r\n    factory.register(\"tv\", TvItem)\r\n    factory.register(\"bioreactor\", BioreactorItem)\r\n\r\n    state.preload = function() {\r\n        //Kiwi.State.prototype.preload.call(this)\r\n        const jsonfile = \"levels/level_\" + levelId + \".json\"\r\n        this.addJSON(\"tilemap\", jsonfile)\r\n        this.addSpriteSheet(\"tiles\", \"levels/tileset.png\", TILE_SIZE, TILE_SIZE)\r\n        player.preload()\r\n        this.addSpriteSheet(\"tvSprite\", \"assets/tv.png\", 64, 64)\r\n        this.addSpriteSheet(\"bioreactorSprite\", \"assets/bioreactor.png\", 64, 64)\r\n    }\r\n\r\n    state.create = function() {\r\n        //Kiwi.State.prototype.create.call(this)\r\n        this.tilemap = new Kiwi.GameObjects.Tilemap.TileMap(this, \"tilemap\", this.textures.tiles)\r\n        for (let i = 0; i < this.tilemap.layers.length; ++i) {\r\n            this.addChild(this.tilemap.layers[i])\r\n        }\r\n        this.physLayer = this.tilemap.layers[this.tilemap.layers.length - 1]\r\n        console.log(\"Tile types N: \", this.tilemap.tileTypes.length)\r\n        for(var i = 1; i < this.tilemap.tileTypes.length; i++) {\r\n            //if (this.tilemap.tileTypes[i].properties[\"type\"] == \"solid\") {\r\n                this.tilemap.tileTypes[i].allowCollisions = Kiwi.Components.ArcadePhysics.ANY\r\n            //}\r\n        }\r\n        player.create()\r\n        const objects = readObjectsFromJSONFile(this, \"tilemap\")\r\n        state.items = []\r\n        for (let obj of objects) {\r\n            if (obj.type == \"player\") {\r\n                player.posX = obj.x\r\n                player.posY = obj.y\r\n            } else {\r\n                let itm = factory.createItemFromObject(obj)\r\n                if (itm) {\r\n                    itm.create()\r\n                    this.items.push(itm)\r\n                }\r\n            }\r\n        }    \r\n        if (state.items.length > 0) {\r\n            state.swapChildren(player.sprite, state.items[state.items.length - 1].sprite)\r\n        }    \r\n    }\r\n\r\n    state.update = function() {\r\n        Kiwi.State.prototype.update.call(this)\r\n\r\n        if (DEBUG) {\r\n            if (!dbg && this.game.stage) {\r\n                dbg = true\r\n                this.game.stage.createDebugCanvas();\r\n            }\r\n        }\r\n        this.physLayer.physics.overlapsTiles(player.sprite, true);\r\n        for (let itm of this.items) {\r\n            this.physLayer.physics.overlapsTiles(itm.sprite, true);\r\n        }\r\n\r\n        if (this.game.input.keyboard.isDown(Kiwi.Input.Keycodes.LEFT)) {\r\n\t        player.go(Consts.LEFT)\r\n\t    } else if (this.game.input.keyboard.isDown(Kiwi.Input.Keycodes.RIGHT)) {\r\n\t        player.go(Consts.RIGHT)\r\n\t    } else {\r\n\t        player.stop()\r\n        }\r\n        if (player.isTouching(Consts.DOWN)) {\r\n\t        //Does the player want to up?\r\n\t        if (this.game.input.keyboard.isDown(Kiwi.Input.Keycodes.UP)) {\r\n\t            player.jump()\r\n            }\r\n            \r\n            if (this.game.input.keyboard.justPressed(Kiwi.Input.Keycodes.A) ) {\r\n                if (!player.item) {\r\n                    for (let itm of this.items) {\r\n                        try {\r\n                            if (itm.canBeCarried(player)) {\r\n                                player.takeItem(itm)\r\n                                break\r\n                            }\r\n                        } catch (e) {\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }  else if (this.game.input.keyboard.justPressed(Kiwi.Input.Keycodes.S)) {\r\n                if (player.item) {\r\n                    player.throwItem()\r\n                }\r\n            }\r\n        }\r\n        \r\n        player.update()\r\n        for (let itm of this.items) {\r\n            if (itm != player.item) {\r\n                itm.update()\r\n            }\r\n        }\r\n\r\n        if (DEBUG) {\r\n            this.game.stage.clearDebugCanvas()\r\n            player.drawBBoxOn(this.game.stage.dctx)\r\n            for (let itm of this.items) {\r\n                itm.drawBBoxOn(this.game.stage.dctx)\r\n            }\r\n        }\r\n    }\r\n\r\n    return state\r\n}\r\n\r\nexport {LevelState}","\"use strict\"\r\n\r\nimport {LevelState} from \"./level_state\"\r\n\r\nvar state = new Kiwi.State(\"Level\")\r\n\r\nstate.preload = function() {\r\n    this.addJSON('tilemap', 'levels/test.json');\r\n    this.addSpriteSheet('tiles', 'levels/tileset.png', 48, 48);\r\n}\r\n\r\nstate.create = function() {\r\n\tthis.tilemap = new Kiwi.GameObjects.Tilemap.TileMap(this, 'tilemap', this.textures.tiles);\r\n\tthis.addChild(this.tilemap.layers[0]);\r\n}\r\n\r\nstate = LevelState(\"0\")\r\n\r\nconst game = new Kiwi.Game(null, \"The Game\", state, {scaleType: Kiwi.Stage.SCALE_NONE})\r\n\r\n","\"use strict\"\r\n\r\nimport {Character} from \"./character\"\r\n\r\nimport * as Consts from \"./consts\"\r\nimport { GRAVITY } from \"./game_config\";\r\n\r\nclass Player extends Character \r\n{\r\n    constructor(state) {\r\n        super(state)\r\n        this.HITBOX = new Kiwi.Geom.Rectangle(22, 48, 50, 80)\r\n        this.SPRITE_FILE = \"assets/elon_maks.png\"\r\n        this.NAME = \"player\"\r\n        this.item = null\r\n    }\r\n\r\n    _createAnimations() {\r\n        this._addAnimation(\"idle\", [0], 0.1, false)\r\n        this._addAnimation(\"jump_start\", {from: 24, to: 26}, 0.05, false)\r\n        this._addAnimation(\"jump_fly\", {from: 27, to: 32}, 0.05, true)\r\n        this._addAnimation(\"jump_end\", {from: 33, to: 35}, 0.05, true)\r\n        this._addAnimation(\"run\", {from: 12, to: 19}, 0.05, true)\r\n        this._addAnimation(\"carry_idle\", [36], 0.1, false)\r\n        this._addAnimation(\"carry\", {from: 36, to: 43}, 0.05, true)\r\n        this._addAnimation(\"carry_jump_start\", [40], 0.1, false)\r\n        this._addAnimation(\"carry_jump_fly\", [43], 0.1, false)\r\n        this.playAnimation(\"idle\")\r\n    }\r\n\r\n    update() {\r\n        if (this.isTouching(Consts.DOWN)) {\r\n            if (this.velocityY >= 0) {\r\n                if (this.velocityX == 0) {\r\n                    if (this.item) {\r\n                        this.playAnimation('carry_idle')\r\n                    } else {\r\n                        this.playAnimation('idle');\r\n                    }\r\n                } else {\r\n                    if (this.item) {\r\n                        this.playAnimationIfNotPlaying(\"carry\")\r\n                    } else {\r\n                        this.playAnimationIfNotPlaying(\"run\")\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if ((this.currentAnimation.name != \"jump_start\" && this.currentAnimation.name != \"carry_jump_start\") \r\n                || !this.currentAnimation.isPlaying) {\r\n                if (this.item) {\r\n                    this.playAnimationIfNotPlaying(\"carry_jump_fly\")\r\n                } else {\r\n                    this.playAnimationIfNotPlaying(\"jump_fly\")\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.item) {\r\n            this.item.posX = this.posX\r\n            this.item.posY = this.posY - this.bbox.hitbox.height\r\n        }\r\n    }\r\n\r\n    jump() {\r\n        this.velocityY = -30\r\n        if (this.item) {\r\n            this.playAnimationIfNotPlaying(\"carry_jump_start\")    \r\n        } else {\r\n            this.playAnimationIfNotPlaying(\"jump_start\")\r\n        }\r\n    }\r\n\r\n    go(dir) {\r\n        this.direction = dir\r\n        let vel = 0\r\n        if (dir == Consts.LEFT) {\r\n            vel = -15\r\n        } else if (dir == Consts.RIGHT) {\r\n            vel = 15\r\n        }\r\n        this.velocityX = vel\r\n    }\r\n\r\n    stop() {\r\n        this.velocityX = 0\r\n    }\r\n\r\n    takeItem(item) {\r\n        if (!this.item) {\r\n            if (!item) {\r\n                this.item = item\r\n            } else if (item.canBeCarried(this)) {\r\n                this.item = item\r\n                this.item.accelerationY = 0\r\n                this.item.posX = this.posX\r\n                this.item.posY = this.posY - this.bbox.hitbox.height\r\n            }\r\n        }\r\n    }\r\n\r\n    throwItem() {\r\n        if (this.item) {\r\n            this.item.velocityY = -40\r\n            if (this.direction == Consts.RIGHT) {\r\n                this.item.velocityX = 40\r\n            } else {\r\n                this.item.velocityX = -40\r\n            }\r\n            this.item.accelerationY = GRAVITY\r\n            this.item.flying = true\r\n            this.item = null\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n\r\nfunction PlayerSprite(state, texture, initx, inity) {\r\n    Kiwi.GameObjects.Sprite.call(this, state, texture, initx, inity)\r\n    let box = new Kiwi.Geom.Rectangle(9, 40, 70, 88)\r\n    this.physics = this.components.add(new Kiwi.Components.ArcadePhysics(this, this.box))\r\n    this.physics.box.hitbox = box\r\n    this.physics.acceleration.y = 7\r\n    this.transform.anchorPointX = 44\r\n    this.transform.anchorPointY = 84\r\n\r\n    this.update = function() {\r\n        Kiwi.GameObjects.Sprite.prototype.update.call(this)\r\n        this.physics.update()\r\n    }\r\n}\r\n\r\nKiwi.extend(PlayerSprite, Kiwi.GameObjects.Sprite)\r\n\r\nclass Player {\r\n    constructor(state) {\r\n        this.state = state\r\n        this.initialized = false\r\n        this.direction = 0 // 0 - right, 1 - left\r\n        this.sprite_size = 128;\r\n    }\r\n\r\n    preload() {\r\n        this.state.addSpriteSheet(\"playerSprite\", \"assets/elon_maks.png\", this.sprite_size, this.sprite_size)\r\n    }\r\n\r\n    create() {\r\n        this.sprite = new PlayerSprite(this.state, this.state.textures.playerSprite, 3 * 48, 0)\r\n        this.sprite.animation.add(\"idle\", [0], 0.1, false)\r\n        this.sprite.animation.add(\"run\", [24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], 0.05, true)\r\n        this.sprite.animation.add(\"jump\", [12, 13, 14, 15, 16, 17, 18, 19], 0.05, true)\r\n        this.sprite.animation.add(\"carry\", [36, 37, 38, 39, 40, 41, 42, 43], 0.05, true)\r\n        this.sprite.animation.play(\"idle\")\r\n        this.state.addChild(this.sprite)\r\n        this.initialized = true\r\n    }\r\n\r\n    moveTo(x, y) {\r\n        let realx = x - this.sprite.anchorPointX\r\n        let realy = y - this.sprite_size\r\n        this.sprite.x = realx\r\n        this.sprite.y = realy\r\n    }\r\n}\r\n*/\r\nexport {Player}"],"sourceRoot":""}